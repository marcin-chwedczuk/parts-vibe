<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout(~{::title}, ~{::section})}">
<head>
  <title th:text="#{admin.user.invite.title}">Invite User</title>
</head>
<section th:replace="~{layout/admin :: body(~{::div})}">
  <div>
    <h1 class="h4 mb-3" th:text="#{admin.user.invite.heading}">Invite User</h1>

    <div class="card">
      <div class="card-body">
        <form method="post" th:action="@{/admin/users/invite}" th:object="${form}" novalidate>
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
          <th:block th:replace="~{admin/users-fragments :: stateHiddenFields(${hiddenFieldsForActions})}"></th:block>

          <div class="alert alert-danger mb-3" th:if="${#fields.hasAnyErrors()}">
            <div th:text="#{admin.user.validation.generic}">Validation failed.</div>
            <ul class="mb-0 mt-2">
              <li th:each="fieldError : ${#fields.errors('*')}" th:text="${fieldError}">Field validation error.</li>
            </ul>
          </div>

          <div class="mb-3">
            <label class="form-label" for="email" th:text="#{admin.user.invite.fields.email}">Email</label>
            <input id="email" type="email" class="form-control" th:field="*{email}" th:errorclass="is-invalid" />
            <div class="invalid-feedback" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">Invalid email.</div>
          </div>

          <div class="row g-3 mb-3">
            <div class="col-12 col-md-6">
              <label class="form-label" for="roleName" th:text="#{admin.user.invite.fields.role}">Role</label>
              <select id="roleName" class="form-select" th:field="*{roleName}" th:errorclass="is-invalid">
                <option th:each="role : ${inviteRoles}" th:value="${role}" th:text="${role}">ROLE_USER</option>
              </select>
              <div class="invalid-feedback" th:if="${#fields.hasErrors('roleName')}" th:errors="*{roleName}">Invalid role.</div>
            </div>
            <div class="col-12 col-md-6">
              <label class="form-label" for="validity" th:text="#{admin.user.invite.fields.validity}">Link validity</label>
              <select id="validity" class="form-select" th:field="*{validity}" th:errorclass="is-invalid">
                <option th:each="option : ${inviteValidityOptions}" th:value="${option}" th:text="${option}">24h</option>
              </select>
              <div class="invalid-feedback" th:if="${#fields.hasErrors('validity')}" th:errors="*{validity}">Invalid validity.</div>
            </div>
          </div>

          <div class="mb-4">
            <label class="form-label" for="inviteMessage" th:text="#{admin.user.invite.fields.message}">Invite message (optional)</label>
            <textarea id="inviteMessage" class="form-control" rows="4" th:field="*{inviteMessage}" th:errorclass="is-invalid"></textarea>
            <div class="invalid-feedback" th:if="${#fields.hasErrors('inviteMessage')}" th:errors="*{inviteMessage}">Invalid message.</div>
          </div>

          <div class="d-flex justify-content-end gap-2">
            <a class="btn btn-outline-secondary" th:href="${filters.toUserManagementUrl()}" th:text="#{admin.user.actions.cancel}">
              Cancel
            </a>
            <button type="submit" class="btn btn-primary">
              <i class="bi bi-envelope me-2" aria-hidden="true"></i>
              <span th:text="#{admin.user.invite.actions.send}">Send invite</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
</html>
